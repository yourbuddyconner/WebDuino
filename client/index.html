<head>
	<title>WebDuino - Making Your Arduino Smarter</title>
	<link href='http://fonts.googleapis.com/css?family=Oxygen:400,300,700' rel='stylesheet' type='text/css'>
	<script type="text/javascript" src="https://www.google.com/jsapi"></script>
	<script type="text/javascript">
		google.load("visualization", "1", {packages:["corechart"]});
	</script>
</head>

<template name="header">
	<header>
		<div class="wrapper">
			<h1>WebDuino <small>Making Your Arduino Smarter</small></h1>
			<!-- <form>
				<input type="text" value="Email Address">
				<input type="button" value="Sign Up">
			</form> -->
			{{> loginButtons}}
			<div class="clear"></div>
		</div>
	</header>
</template>

<template name="main">
	<div id="container">
		{{> header}}
		{{#if currentUser}}
			{{> projects}}
		{{else}}
			{{> home}}
		{{/if}}
		<div class="clear"></div>
		{{> footer}}
	</div>
</template>

<template name="home">
	<div id="home" class="wrapper">
		<h1 class="bigGrey">Welcome to Webduino!</h1>
		<br>

		<h3>What is Webduino?</h3>
		<p>Webduino is a web service that provides you with the capability of connecting your arduino to the internet and storing the data on a database with relative ease.</p>

		<h3>Why Webduino?</h3>
		<p>The great part about Webduino is it gives you all of the web capabilities without the need to write any unnecessary server code.</p>

		<h3>How it works?</h3>
		<p>Users create projects that contain sensors recognized by Webduino and Webduino then generates arduino code that can be directly placed into your projects. The code sends your data to our web server that is then stored, read, and reacted to at any time within the web interface.</p>
	</div>
</template>

<template name="projects">
	{{> projectModals}}
	<div class="wrapper">
		<div id="projectTitle">
			<h2 class="bigRed">Your Projects</h2>
		</div>
	</div>
	<div id="banner">
		<div class="wrapper">
		<div class="accordion" id="projectsAccordion">
			<div class="accordion-group">
		{{#each projects}}
				<div class="accordion-heading">
      				<a class="accordion-toggle" data-toggle="collapse" data-parent="#projectsAccordion" data-id="{{_id}}" href="#{{_id}}">
        				{{name}}
      				</a>
      			</div>
				<div id="{{_id}}" class="yolo accordion-body collapse">
			    	<div class="accordion-inner" id="sensorList">
						{{#each sensors}}
							<div class="sensor well" data-name="{{name}}">
								<h5>{{name}}</h5>
								<p>Sensor Type: {{type}}</p>
								<p>Last Report: 4:30 3/24/2014</p>
							</div>
						{{/each}}
						<div class="well" id="addSensorButton">
							<a id="addSensorButton"><h5>Add Sensor +</h5></a>
						</div>
			    	</div>
			    </div>
		{{/each}}
				<div class="accordion-heading">
					<a id="addProjectButton" class="accordion-toggle" href="#">Add a Project +</a>
				</div>
			</div>
		</div>
			<section class="graph">
				<div id="graph">
					<img src="http://placehold.it/700x200">
				</div>
			</section>
			<div class="graphOptions hidden">
			</div>
			<div class="clear"></div>
		</div>
	</div>
</template>

<template name="projectModals">
	<div id="projectModal" class="modal hide fade">
	  <div class="modal-header">
	    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
	    <h3>Create a New Project</h3>
	  </div>
		{{#autoForm collection="Projects" id="insertProjectForm" type="insert"}}
		<div class="modal-body">
			<fieldset>
			<p>Please fill in the name for your new project and press "Save Changes"</p>
			<br>
			{{> afQuickField name="name"}}
			</fieldset>
		</div>
		<div class="modal-footer">
		<button onclick="$('#projectModal').modal('hide')" class="btn">Close</button>
		<button type="submit" class="btn btn-primary">Save</button>
		</div>
		{{/autoForm}}
		</div>

	<div id="sensorModal" class="modal hide fade">
	  	<div class="modal-header">
		    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		    <h3>Add a new Sensor</h3>
		</div>
			<div id="modalFormContainer">
			{{#autoForm collection="Projects" doc=insertSensorDoc id="insertSensorForm" type="update"}}
				<div class="modal-body">
					<fieldset>
						<p>Please fill in the name for your new project and press "Save Changes"</p>
						<br>
						{{> afQuickField name="name"}}
						{{> afQuickField name="owner" value=currentUser._id type="hidden"}}
						{{> afArrayField name="sensors" maxCount=1 minCount=1}}
					</fieldset>
					<div class="modal-footer">
						<button onclick="$('#sensorModal').modal('hide')" class="btn">Close</button>
						<button type="submit" class="btn btn-primary">Save</button>
					</div>
				</div>
			{{/autoForm}}
			</div>
		</div>
</template>

<template name="footer">
	<footer>
		<section class="copyright">
			<p class="text-center">Copyright &copy; 2014 <a href="http://bearspark.io"><strong>BearSpark</strong></a>.<br/>
			All Rights Reserved.</p>
		</section>
	</footer>
</template>
