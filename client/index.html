<head>
	<title>WebDuino - Making Your Arduino Smarter</title>
	<link href='http://fonts.googleapis.com/css?family=Oxygen:400,300,700' rel='stylesheet' type='text/css'>
	<script type="text/javascript" src="https://www.google.com/jsapi"></script>
	<script type="text/javascript">
		google.load("visualization", "1", {packages:["corechart"]});
	</script>
</head>

<template name="header">
	<header>
		<div class="wrapper">
			<h1>WebDuino <small>Making Your Arduino Smarter</small></h1>
			<!-- <form>
				<input type="text" value="Email Address">
				<input type="button" value="Sign Up">
			</form> -->
			{{> loginButtons}}
			<div class="clear"></div>
		</div>
	</header>
</template>

<template name="main">
	<div id="container">
		{{> header}}
		{{#if currentUser}}
			{{> projects}}
		{{else}}
			{{> home}}
		{{/if}}
		<div class="clear"></div>
		{{> footer}}
	</div>
</template>

<template name="home">
<!-- 	<div id="home-banner">
		<div class="wrapper">
			<section class="introduction">
				<h2>Webduino</h2>
				<p>Making your Arduino smarter.</p>
			</section>
			<div class="clear"></div>
		</div>
	</div> -->
	<div id="feature-section" class="feature-left">
		<div class="wrapper">
			<section class="description">
				<h3>What is WebDuino?</h3>
				<p>The Arduino is a staple in the Maker Community, a simple, easy to use project board with a broad community following. For many people, their experience with Arduino is often their first time programming, and while they are able to connect their board to a couple sensors, the real clarity to data comes when you store it and look it in relation to time! However, to save a substantial amount of data over time on an Arduino locally, you need to buy a shield with an SD Card slot, and wheres the fun in that?.</p>

				<p>Webduino is the easiest way to quickly get your Arduino connected to the internet. All you need is a couple sensors and an internet shield!</p>
			</section>
			<section class="image">
				<img src="images/arduino.png" alt="sample image" />
			</section>
			<div class="clear"></div>
		</div>
	</div>
	<div id="feature-section" class="feature-right">
		<div class="wrapper">
			<section class="description">
				<h3>How Does It Work?</h3>
				<p>Setup is easy, once you've created an account you can configure how many sensors you have and where they will go, WebDuino will then generate code on-the-fly based on your project, code that is then pasted directly into your Arduino Sketch. Your Arduino board then sends the sensor data to WebDuino via HTTP and it is read, stored, and potentially reacted to at any time within the web interface.</p>
				
				<h3>How Can It Help Me?</h3>
				<p>WebDuino frees you from having to program your own server to record data from your arduino, giving more freedom to hobby and weekend projects.</p>
			</section>
			<section class="image">
				<img src="images/sample-image.png" alt="sample image" />
			</section>
			<div class="clear"></div>
		</div>
	</div>
	<div class="wrapper">
		<a class="wide-button" href="#">Sign Up Now!</a>
	</div>

</template>
<template name="projects">
	{{> projectModals}}
	<div class="wrapper">
		<div id="projectTitle">
			<h2 class="bigRed">Your Projects</h2>
		</div>
	</div>
	<div id="banner">
		<div class="wrapper">
		<div class="accordion" id="projectsAccordion">
			<div class="accordion-group">
		{{#each projects}}
				<div class="accordion-heading">
      				<a class="accordion-toggle" data-toggle="collapse" data-parent="#projectsAccordion" data-id="{{_id}}" href="#{{_id}}">
        				{{name}}
      				</a>
      			</div>
				<div id="{{_id}}" class="yolo accordion-body collapse">
			    	<div class="accordion-inner" id="sensorList">
						{{#each sensors}}
							<div class="sensor well" data-name="{{name}}">
								<h5>{{name}}</h5>
								<p>Sensor Type: {{type}}</p>
								<p>Last Report: 4:30 3/24/2014</p>
							</div>
						{{/each}}
						<div class="well" id="addSensorButton">
							<a id="addSensorButton"><h5>Add Sensor +</h5></a>
						</div>
			    	</div>
			    </div>
		{{/each}}
				<div class="accordion-heading">
					<a id="addProjectButton" class="accordion-toggle" href="#">Add a Project +</a>
				</div>
			</div>
		</div>
			<section class="graph">
				<div id="graph">
					<img src="http://placehold.it/700x200">
				</div>
			</section>
			<div class="graphOptions hidden">
			</div>
			<div class="clear"></div>
		</div>
	</div>
</template>

<template name="projectModals">
	<div id="projectModal" class="modal hide fade">
	  <div class="modal-header">
	    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
	    <h3>Create a New Project</h3>
	  </div>
		{{#autoForm collection="Projects" id="insertProjectForm" type="insert"}}
		<div class="modal-body">
			<fieldset>
			<p>Please fill in the name for your new project and press "Save Changes"</p>
			<br>
			{{> afQuickField name="name"}}
			</fieldset>
		</div>
		<div class="modal-footer">
		<button onclick="$('#projectModal').modal('hide')" class="btn">Close</button>
		<button type="submit" class="btn btn-primary">Save</button>
		</div>
		{{/autoForm}}
		</div>

	<div id="sensorModal" class="modal hide fade">
	  	<div class="modal-header">
		    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		    <h3>Add a new Sensor</h3>
		</div>
			<div id="modalFormContainer">
			{{#autoForm collection="Projects" doc=insertSensorDoc id="insertSensorForm" type="update"}}
				<div class="modal-body">
					<fieldset>
						<p>Please fill in the name for your new project and press "Save Changes"</p>
						<br>
						{{> afQuickField name="name"}}
						{{> afQuickField name="owner" value=currentUser._id type="hidden"}}
						{{> afArrayField name="sensors" maxCount=1 minCount=1}}
					</fieldset>
					<div class="modal-footer">
						<button onclick="$('#sensorModal').modal('hide')" class="btn">Close</button>
						<button type="submit" class="btn btn-primary">Save</button>
					</div>
				</div>
			{{/autoForm}}
			</div>
		</div>
</template>

<template name="footer">
	<footer>
		<section class="copyright">
			<p class="text-center">Copyright &copy; 2014 <a href="http://bearspark.io"><strong>BearSpark</strong></a>.<br/>
			All Rights Reserved.</p>
		</section>
	</footer>
</template>
