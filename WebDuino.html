<head>
  <title>WebDuino</title>
  <script type="text/javascript" src="http://code.highcharts.com/highcharts.js"></script>
  <script type="text/javascript">
	  	function addSensor () {
	  		var sensorName = $('#sensorName').val();
	  		var sensorType = $('#sensorType').val();
	 	 	var pins = $("#pins").val();
	  		console.log("stuff")
	  		$('#sensorTable').prepend("<tr><td>" + sensorName + "</td><td>" + sensorType + "</td><td>" + pins + "</td>");
		}
	</script>
</head>

<body>
	<div id="container">
		{{> header}}
		{{#if currentUser}}
			{{> projects}}
		{{else}}
			{{> home}}
		{{/if}}
	</div>
</body>

<template name="home">
  <h1>Hello World!</h1>
  {{greeting}}
  <input type="button" value="Click" />
</template>

<template name="header">
	<div id="header">
		{{> loginButtons}}
	</div>
</template>

<template name="projects">
	<h1 >Your Projects</h1>
	
	<h3><a data-toggle="collapse" href="#addSensor">Add New</a></h3>
	<div id="addSensor" class="panel-collapse collapse">
		
			<input type="text" name="projectName" class="span6" placeholder="Project Name"> <button>Add Project</button>> <br>
		<table id="sensorTable">
			<tr>
				<td><input type="text" name="sensorName" id="sensorName" placeholder="Sensor Name"></td>
				<td><select class="form-control" id="sensorType" name="sensorType">
					<option>Potentiometer</option>
					<option>Accelerometer</option>
				</select></td>
				<td><input type="text" name="pins" id="pins" placeholder="Pins (Ex. 1 2 3)"></td>
				<td><button onclick="addSensor()">Add Sensor</button></td>
			</tr>
		
		</table>
	</div>

	<div class="panel-group" id="accordion">
		{{#each projects}}
			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">
						<a data-toggle="collapse" data-parent="#accordion" href="#{{_id}}">{{name}}</a>
					</h3>
				</div>
				<div id="{{_id}}" class="panel-collapse collapse">
					<div class="panel-body 1indent">
						<h4>Sensors: </h4>
							{{#each sensors yolo=_id}}
								<h5 class="2indent"><a data-toggle="collapse" href="#{{_id}}">{{name}}</a></h5>
								<div id="{{_id}}" class="panel-collapse collapse">
									<p class="3indent">Sensor Type: {{sensorType}}</p>
									<p class="3indent">Pins: {{pin}}</p>
									<p class="3indent">Last Recieved Data: (TODO)</p>
									<p class="3indent"><a data-toggle="collapse" href="#{{_id}}data">Data</a></p>
									<div id="{{_id}}data" class="panel-collapse collapse">
										<!--<div id="{{_id}}chart" class="chart"></div>
										<script type="text/javascript">
											$(function () {
												$('#{{_id}}chart chart').highcharts({
													chart: {
														type: "line";
													},

												});
											});
										</script>-->
									</div>
								</div>
							{{/each}}
					</div>
				</div>
			</div>
		{{/each}}
	</div>
</template>

<template name="createProject">
	<form>
		<input type="text" name="name" placeholder="Project Name">
		<h3>Sensors:</h3>
		<div id="sensorList">
			
		</div>
		<p><a href="" onclick="$('#addSensor').toggle()">Add Sensor+</a></p>
	</form>
</template>